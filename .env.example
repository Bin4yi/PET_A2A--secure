# ============================================================================
# Asgardeo OAuth 2.0 Configuration for A2A Authentication
# ============================================================================
# This configuration enables secure agent-to-agent communication using OAuth 2.0
# 
# Setup Instructions:
# 1. Create an Asgardeo account at https://asgardeo.io/
# 2. Create a new application with "Machine-to-Machine" type (Client Credentials Grant)
# 3. Copy the Client ID and Client Secret
# 4. Configure the required scopes: vaccination:read appointments:read
# 5. Copy this file to .env and fill in your actual values
# 6. Keep .env private - never commit it to version control!

# ============================================================================
# Token Endpoint (where orchestrator gets access tokens)
# ============================================================================
# Replace <org> with your Asgardeo organization name
# Example: https://api.asgardeo.io/t/mycompany/oauth2/token
ASGARDEO_TOKEN_URL=https://api.asgardeo.io/t/<your_org>/oauth2/token

# ============================================================================
# Client Credentials (for orchestrator to authenticate itself)
# ============================================================================
# Get these from your Asgardeo application settings
ASGARDEO_CLIENT_ID=<your_orchestrator_client_id>
ASGARDEO_CLIENT_SECRET=<your_orchestrator_client_secret>

# ============================================================================
# API Resource Configuration (for scope-based authorization)
# ============================================================================
# Create an API Resource in Asgardeo Console under "API Authorization"
# The identifier should match what you created in Asgardeo
# 
# Your API Resource identifier in Asgardeo:
API_RESOURCE_IDENTIFIER=https://api.petclinic.com

# ============================================================================
# Required Scopes (what permissions the orchestrator needs)
# ============================================================================
# These scopes must be:
# 1. Defined in the API Resource above (in Asgardeo Console)
# 2. Authorized for the Orchestrator application
# 3. Assigned to the user via RBAC role
#
# With API_RESOURCE_IDENTIFIER set, scopes will be requested as:
#   petCare/vaccination:read, petCare/appointments:read
#
# ASGARDEO_SCOPE=openid https://api.petclinic.com/vaccination:read https://api.petclinic.com/appointments:read
ASGARDEO_SCOPE=openid vaccination:read appointments:read

# ============================================================================
# JWKS URL (where agents fetch public keys to validate tokens)
# ============================================================================
# Replace <org> with your Asgardeo organization name
# Example: https://api.asgardeo.io/t/mycompany/oauth2/jwks
ASGARDEO_JWKS_URL=https://api.asgardeo.io/t/<your_org>/oauth2/jwks

# ============================================================================
# Token Issuer (who issued the token - used for validation)
# ============================================================================
# Replace <org> with your Asgardeo organization name
# NOTE: For token exchange flow, the issuer is the token endpoint URL
# Example: https://api.asgardeo.io/t/mycompany/oauth2/token
ASGARDEO_ISSUER=https://api.asgardeo.io/t/<your_org>/oauth2/token

# ============================================================================
# Authentication Control (enable/disable auth for testing)
# ============================================================================
ASGARDEO_AUTH_ENABLED=true

# ============================================================================
# User Authentication & Token Exchange Configuration
# ============================================================================
# Authorization URL for device flow (user sign-in)
ASGARDEO_AUTHORIZE_URL=https://api.asgardeo.io/t/<your_org>/oauth2/authorize
ASGARDEO_DEVICE_AUTHORIZE_URL=https://api.asgardeo.io/t/<your_org>/oauth2/device_authorize

# Token Exchange Endpoint
ASGARDEO_TOKEN_EXCHANGE_URL=https://api.asgardeo.io/t/<your_org>/oauth2/token

# ============================================================================
# Agent-Specific Application IDs & Secrets (Registered in Asgardeo)
# ============================================================================
# These should match the Application Client IDs in your Asgardeo console
# Each agent needs its own credentials to obtain an actor_token
# Required for OAuth Extension for AI Agents (on-behalf-of user flow)

# Vaccination Agent Application (from Asgardeo)
VACCINATION_APP_ID=<vaccination_agent_client_id>
VACCINATION_APP_SECRET=<vaccination_agent_client_secret>
VACCINATION_REQUIRED_SCOPE=vaccination:read

# Appointments Agent Application (from Asgardeo)
APPOINTMENTS_APP_ID=<appointments_agent_client_id>
APPOINTMENTS_APP_SECRET=<appointments_agent_client_secret>
APPOINTMENTS_REQUIRED_SCOPE=appointments:read

# ============================================================================
# Optional: OpenAI API Key (for LLM functionality)
# ============================================================================
# Required for the orchestrator's AI capabilities
# Get your API key from https://platform.openai.com/api-keys


OPENAI_API_KEY=<your_openai_api_key>
